@typeparam TValue
@inherits BaseAntStorageFileInput<TValue>
<AntDesign.Spin Spinning="IsSpinning">
    @if (ShowUpload)
    {
        <CascadingValue Value="this" IsFixed="true">
            <AntStorageItemsInput
                TValue="TValue"
                @ref="FileInput"
                Storage="@Storage"
                MaxFileSize="MaxFileSize"
                MaxAllowedFiles="@MaxFilesToUpload"
                ContentTypes="@ContentTypes"
                ListType="text"
                ButtonText="@UploadText"
                GenerateMetadata="@((request, stream) => GenerateMetadataAsync(request, stream))"
                @bind-Value="Items"
                UploadPath="@UploadPath"
                OnChange="@OnChangeAsync">
            </AntStorageItemsInput>
        </CascadingValue>
    }
    <div class="ant-upload-list ant-upload-list-picture upload-list-inline ant-upload-list-@Size">
        @foreach (var file in _files)
        {
            var tips = file.StorageItem.FileName;
            <div Class="ant-upload-list-picture-container" title="@tips">

                <div class="ant-upload-list-item ant-upload-list-item-done  ant-upload-list-item-list-type-picture">
                    <div class="ant-upload-list-item-info">
                        <span class="ant-upload-span">
                            <div class="ant-upload-list-item-thumbnail ant-upload-list-item-file">
                                <Icon Type="paper-clip"/>
                            </div>
                            <a target="_blank" rel="noopener noreferrer" class="ant-upload-list-item-name" title="@file.StorageItem.FileName" href="@file.Url">@file.StorageItem.FileName</a>
                            <span class="ant-upload-list-item-actions picture">
                                @if (ShowOrdering)
                                {
                                    <button title="@LeftText" type="button" class="ant-btn ant-btn-text ant-btn-sm ant-btn-icon-only ant-upload-list-item-card-actions-btn" @onclick="() => MoveLeft(file)" disabled="@(!CanMoveLeft(file))">
                                        <AntDesign.Icon Type="left"/>
                                    </button>
                                }
                                <a href="@file.Url" target="_blank" rel="noopener noreferrer" title="@DownloadText">
                                    <AntDesign.Icon Type="download"/>
                                </a>
                                <button title="@RemoveText" type="button" class="ant-btn ant-btn-text ant-btn-sm ant-btn-icon-only ant-upload-list-item-card-actions-btn" @onclick="() => RemoveFile(file)">
                                    <AntDesign.Icon Type="delete"/>
                                </button>
                                @if (ShowOrdering)
                                {
                                    <button title="@RightText" type="button" class="ant-btn ant-btn-text ant-btn-sm ant-btn-icon-only ant-upload-list-item-card-actions-btn" @onclick="() => MoveRight(file)" disabled="@(!CanMoveRight(file))">
                                        <AntDesign.Icon Type="right"/>
                                    </button>
                                }
                            </span>
                        </span>
                    </div>
                </div>
            </div>
        }
    </div>
</AntDesign.Spin>
